<!-- this config file uses the Dec13h12m53s06y2015 t-matrix with the bands in this orderB3+B1+B2+B5+B4+B6 -->
<configurable_parameters>
   <prefix to be used when assigning accession numbers to colonies -->
     <ID_prefix>L7_</ID_prefix>
   <!-- ID name of the satellite that generated the imagery, may take these values: L4 L5 L7 L8 -->     
     <satellite_ID>L7</satellite_ID>

   <!-- number of scenes to allocate to each compute node -->
     <scenes_per_node>100.0</scenes_per_node>
   <!-- prefix to be used when assigning accession numbers to colonies -->
     <ID_prefix>L7_</ID_prefix>
   <!-- limit on the number of colonies to be found, just in case the iterations go wild -->
     <rook_break>9000</rook_beak> 
   <!-- ID name of the satellite that generated the imagery, may take these values: L4 L5 L7 L8 -->     
     <satellite_ID>L7</satellite_ID>
   <!-- directory for run_exec input and output -->     
     <exec_dir>/u/mschwall/exec_dir/</exec_dir>
   <!-- Pleiades queue name, options = devel, debug, normal, long, low (in priority order -->
     <queue_name>normal</queue_name>
   <!-- full path to the directory where the retrieval code is located -->
     <retrieval_code_path>/u/mschwall/IDLWorkspace81/Default/general_utilities/penguin_retrievals_L7_SLC_off</retrieval_code_path>
   <!-- retrieval code filename (in the above directory) -->
     <retrieval_code_filename>g_write_latlon_multi_2016a.pro</retrieval_code_filename>
   <!-- PBS job name -->
     <PBS_job_name>L7_SLC_off_%s</PBS_job_name>
   <!-- specify PBS number of CPUs and processor model -->
     <PBS_processor_spec>select=1:ncpus=8:model=san</PBS_processor_spec>
   <!-- specify PBS wall clock time allocated to this job hours:minutes:seconds -->
     <PBS_walltime>0:15:00</PBS_walltime>

   <!-- search radius in METERS: all pixels within this radius will be clustered together into a single colony -->
     <search_radius>1000</search_radius>
   <!-- area in ***SQ METERS*** of 1 Landsat pixel = 30*30 -->
     <pix_area>900</pix_area> 
   <!-- Landsat-7 ETM+ pixel dimension in ***METERS*** -->
     <pixel_dim>30.0</pixel_dim>
   <!-- limit on the number of colonies to be found, just in case the iterations go wild -->
     <rook_break>9000</rook_beak> 
</configurable_parameters>

<write_lat_lon>
   <!-- Open the input Landsat data directory to search on (input data) it contains many scenes along the antarctic coast -->
   <!-- these scenes have all been transformed to at-instrument TOA radiance -->
     <etm_multi_scene_dir>/nobackupp6/nexprojects/Order/mschwall<etm_multi_scene_dir>
   <!-- T-matrix -->
     <T_file_name>/u/mschwall/L7_SLC_off_files/B3+B1+B2+B5+B4+B6_t_matrix_Dec13h12m53s06y2015.txt</T_file_name>   
   <!-- this is the output data directory to store the transformed/classified output pixels -->
     <write_lat_lon_out_dir>/u/mschwall/SLC_off_output_directory</write_lat_lon_out_dir>
   <!-- this is the output data directory to store the log file -->
     <write_lat_lon_out_log>/u/mschwall/SLC_off_output_directory</write_lat_lon_out_log>
   <!-- this is the input file that contains a list of lat,lon geographic coordinates of known Adelie penguin colonies (is this still used?) -->
     <adelie_latlon_filename>/u/mschwall/L7_SLC_off_files/adelie_lat_lon_for_config.txt<adelie_latlon_filename>
   <!-- this is the input file that contains the nudge factors that are applied to adjust for L7 to L4/L5 calibration differences -->
     <nudge_filename>/u/mschwall/L7_SLC_off_files/B3+B1+B2+B5+B4+B6_nudge_array_Dec13h12m53s06y2015.txt<nudge_filename>
   <!-- filename to store thumbnail images of colonies generated by write_lat_lon and used to calc the number colonies covered by clouds or not -->
     <cloud_calc_thumbnail_directory>/u/mschwall/SLC_off_output_directory<cloud_calc_thumbnail_directory>
</write_lat_lon>

<find_rooks>
   <!-- the classification summary input file, this needs to get written by the proc write_lat_lon -->
   <find_rooks_input_file_name>/Users/mschwall/~Essentials/penguin_stuff/SLC_off_analysis/L7_SLC_off_class_summary_B3+B1+B2+B5+B4+B6_Dec22h12m18s10y2015.txt</find_rooks_input_file_name>
   <!-- output data directory -->
     <find_rooks_output_dir>/Users/mschwall/~Essentials/penguin_stuff/SLC_off_analysis/L7_SLC_off_find_rooks_output</find_rooks_output_dir>
</find_rooks>  

<make_png_thumbnails>
   <!-- output data directory to store the log file and to store the transformed/classified output pixels -->
   <png_out_dir>/Users/mschwall/~Essentials/penguin_stuff/SLC_off_analysis/L7__SLC_off_find_rooks_thumbnails</png_out_dir>
</make_png_thunbnails>

<r_find_rooks_9_2013a>
   <!-- parse filename and png directory info follow below -->
   <find_rooks_output_parse_filename>/Users/mschwall/~Essentials/penguin_stuff/SLC_off_analysis/L7_SLC_off_find_rooks_output/L7_SLC_off_parsefile_DUMMY.txt</find_rooks_output_parse_filename>
   <find_rooks_pangaea_format_filename>/Users/mschwall/~Essentials/penguin_stuff/SLC_off_analysis/pangaea_format_fileNASA Federal Credit Union, 10208 Greenbelt Rd, Lanham, MD 20706NASA Federal Credit Union, 10208 Greenbelt Rd, Lanham, MD 20706.txt</find_rooks_pangaea_format_filename>
</r_find_rooks_9_2013a>

</PBS script parameters>
   <!-- number of PBS substitution parameters -->
     <number_PBS_parms>7</number_PBS_parms>
   <!-- the PBS scrip follows below, with %s instances = number_PBS_parms -->
<start_PBS_script>
#PBS -S /bin/bash
#PBS -N %s
#PBS -l %s 
#PBS -q %s
#PBS -l walltime=%s
#PBS -j oe
export MODULEPATH=$MODULEPATH:/nex/modules/files 
module load envi/5.3_nex 
cd $PBS_O_WORKDIR
envi < %s > %s
<end_PBS_script>

<!-- number of bat file substitution parameters -->
   <number_bat_parms>4</number_bat_parms>

<!-- the bat file contents follow below, with %s instances = mumber_bat_parms -->
<start_bat_contents>
CD, '%s' ; cd to the directory where the .pro file is
.compile %s ; compile the main .pro file
.compile g_check_for_fmask_scenes_2016a.pro ; compile a bunch of subroutines
.compile g_check_for_dupe_scenes_2016a.pro ; these & the main are all in the same directory
.compile g_calc_hdf_map_projection_2016a.pro
.compile g_mine_lndcal_subsets_multi_2016a.pro
.compile g_checkdupes_multi_2016a.pro
config_path_name = '%s' ; config full path name
%s, config_path_name ; write_lat_lon_filename (without .pro), use config path defined above 
<end_bat_contents>


